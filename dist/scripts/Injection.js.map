{"version":3,"sources":["../../scripts/Injection.es6"],"names":["Injection","options","scriptSelector","config","jQuery","extend","defaultRepeaterCycleSecond","$container","append","repeater","$external","callback","on","path","$externalScript","injectExternal","$externalStyle","name","clearInterval","callable","repeaterCycleSecond","Error","setInterval"],"mappings":";;;;;;IAAMA,S;AACJ,uBAA0B;AAAA,QAAdC,OAAc,uEAAJ,EAAI;;AAAA;;AACxB,QAAMC,iBAAiB,oCAAvB;;AAEA,SAAKC,MAAL,GAAcC,OAAOC,MAAP,CAAc;AAC1BC,kCAA4B;AADF,KAAd,EAEXL,OAFW,CAAd;;AAIA,QAAI,OAAO,KAAKM,UAAZ,KAA2B,WAA/B,EAA4C;AAC1C,WAAKA,UAAL,GAAkBH,qBAAmBF,cAAnB,cAAlB;AACAE,aAAO,MAAP,EAAeI,MAAf,CAAsB,KAAKD,UAA3B;AACD;;AAED,SAAKE,QAAL,GAAgB,EAAhB;AACD;;;;mCAEcC,S,EAAWC,Q,EAAU;AAClC,UAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAClCA,mBAAW,oBAAM,CAChB,CADD;AAED;;AAED,WAAKJ,UAAL,CAAgBC,MAAhB,CAAuBE,SAAvB;AACAA,gBAAUE,EAAV,CAAa,MAAb,EAAqBD,QAArB;AACD;;;yCAEoBE,I,EAAMF,Q,EAAU;AACnC,UAAMG,kBAAkBV,gDAA8CS,IAA9C,iBAAxB;AACA,WAAKE,cAAL,CAAoBD,eAApB,EAAqCH,QAArC;AACD;;;wCAEmBE,I,EAAMF,Q,EAAU;AAClC,UAAMK,iBAAiBZ,yCAAuCS,IAAvC,SAAvB;AACA,WAAKE,cAAL,CAAoBC,cAApB,EAAoCL,QAApC;AACD;;;kCAEaM,I,EAAM;AAClBC,oBAAc,KAAKT,QAAL,CAAcQ,IAAd,CAAd;AACD;;;yCAEoBhB,O,EAASkB,Q,EAAU;AACtC,UAAIhB,SAASC,OAAOC,MAAP,CAAc;AACzBe,6BAAqB,KAAKjB,MAAL,CAAYG;AADR,OAAd,EAEVL,OAFU,CAAb;;AAIA,UAAI,OAAOE,OAAOc,IAAd,KAAuB,QAA3B,EAAqC;AACnC,cAAM,IAAII,KAAJ,CAAU,+BAAV,CAAN;AACD;;AAED,WAAKZ,QAAL,CAAcN,OAAOc,IAArB,IAA6BK,YAAYH,QAAZ,EAAsBlB,QAAQmB,mBAA9B,CAA7B;AACD","file":"Injection.js","sourcesContent":["class Injection {\n  constructor(options = {}) {\n    const scriptSelector = 'head div#unofficialUpsourcePatcher';\n\n    this.config = jQuery.extend({\n      defaultRepeaterCycleSecond: 1\n    }, options);\n\n    if (typeof this.$container === 'undefined') {\n      this.$container = jQuery(`<div id=\"${scriptSelector}\"></div>`);\n      jQuery('head').append(this.$container);\n    }\n\n    this.repeater = {};\n  }\n\n  injectExternal($external, callback) {\n    if (typeof callback !== 'function') {\n      callback = () => {\n      };\n    }\n\n    this.$container.append($external);\n    $external.on('load', callback);\n  }\n\n  injectExternalScript(path, callback) {\n    const $externalScript = jQuery(`<script type=\"text/javascript\" src=\"${path}\"></script>`);\n    this.injectExternal($externalScript, callback);\n  }\n\n  injectExternalStyle(path, callback) {\n    const $externalStyle = jQuery(`<link rel=\"stylesheet\" href=\"${path}\"/>`);\n    this.injectExternal($externalStyle, callback);\n  }\n\n  clearRepeater(name) {\n    clearInterval(this.repeater[name]);\n  }\n\n  injectScriptRepeater(options, callable) {\n    let config = jQuery.extend({\n      repeaterCycleSecond: this.config.defaultRepeaterCycleSecond\n    }, options);\n\n    if (typeof config.name !== 'string') {\n      throw new Error('Couldn\\'t find repeater name.');\n    }\n\n    this.repeater[config.name] = setInterval(callable, options.repeaterCycleSecond);\n  }\n}"]}